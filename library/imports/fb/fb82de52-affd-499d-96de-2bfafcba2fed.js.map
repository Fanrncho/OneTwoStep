{"version":3,"sources":["../../../../../assets/common/script/assets/common/script/uiLogin.js"],"names":["uiPanel","require","cc","Class","extends","properties","onLoad","_super","start","nodeDict","on","Game","GameManager","matchVsInit","window","wx","getUserInfo","success","res","console","log","nickName","userInfo","avatarUrl","bind","fail","active","getSystemInfo","data","getUserInfoBtn","createUserInfoButton","type","text","style","left","screenWidth","top","screenHeight","width","height","lineHeight","backgroundColor","color","textAlign","fontSize","borderRadius","onTap","isClickCd","setTimeout","hide","onEnable","show","onDisable"],"mappings":";;;;;;AAAA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASJ,OADJ;AAELK,gBAAY,EAFP;;AAILC,UAJK,oBAII;AACL,aAAKC,MAAL;AACH,KANI;AAQLC,SARK,mBAQG;AACJ,aAAKC,QAAL,CAAc,OAAd,EAAuBC,EAAvB,CAA0B,OAA1B,EAAmCC,KAAKC,WAAL,CAAiBC,WAApD,EAAiEF,KAAKC,WAAtE;AACA,YAAIE,OAAOC,EAAX,EAAe;AACXA,eAAGC,WAAH,CAAe;AACPC,yBAAS,UAASC,GAAT,EAAc;AACnBC,4BAAQC,GAAR,CAAY,wBAAZ;AACAT,yBAAKC,WAAL,CAAiBS,QAAjB,GAA4BH,IAAII,QAAJ,CAAaD,QAAzC;AACAV,yBAAKC,WAAL,CAAiBW,SAAjB,GAA6BL,IAAII,QAAJ,CAAaC,SAA1C;AACH,iBAJQ,CAIPC,IAJO,CAIF,IAJE,CADF;AAMPC,sBAAM,YAAW;AACbN,4BAAQC,GAAR,CAAY,qBAAZ;AACA,yBAAKX,QAAL,CAAc,OAAd,EAAuBiB,MAAvB,GAAgC,KAAhC;AACAX,uBAAGY,aAAH,CAAiB;AACbV,iCAAS,iBAASW,IAAT,EAAe;AACpBjB,iCAAKC,WAAL,CAAiBiB,cAAjB,GAAkCd,GAAGe,oBAAH,CAAwB;AACtDC,sCAAM,MADgD;AAEtDC,sCAAM,QAFgD;AAGtDC,uCAAO;AACHC,0CAAMN,KAAKO,WAAL,GAAmB,GADtB;AAEHC,yCAAKR,KAAKS,YAAL,GAAoB,IAFtB;AAGHC,2CAAOV,KAAKO,WAAL,GAAmB,IAHvB;AAIHI,4CAAQX,KAAKS,YAAL,GAAoB,IAJzB;AAKHG,gDAAYZ,KAAKS,YAAL,GAAoB,IAL7B;AAMHI,qDAAiB,SANd;AAOHC,2CAAO,SAPJ;AAQHC,+CAAW,QARR;AASHC,8CAAUhB,KAAKS,YAAL,GAAoB,KAT3B;AAUHQ,kDAAc;AAVX;AAH+C,6BAAxB,CAAlC;AAgBAlC,iCAAKC,WAAL,CAAiBiB,cAAjB,CAAgCiB,KAAhC,CAAsC,UAAS5B,GAAT,EAAc;AAChDC,wCAAQC,GAAR,CAAYF,GAAZ;AACA,oCAAIP,KAAKC,WAAL,CAAiBmC,SAArB,EAAgC;AAC5B;AACH;AACDpC,qCAAKC,WAAL,CAAiBmC,SAAjB,GAA6B,IAA7B;AACAC,2CAAW,YAAW;AAClBrC,yCAAKC,WAAL,CAAiBmC,SAAjB,GAA6B,KAA7B;AACH,iCAFD,EAEG,IAFH;AAGA,oCAAG7B,IAAII,QAAP,EAAiB;AACbX,yCAAKC,WAAL,CAAiBS,QAAjB,GAA4BH,IAAII,QAAJ,CAAaD,QAAzC;AACAV,yCAAKC,WAAL,CAAiBW,SAAjB,GAA6BL,IAAII,QAAJ,CAAaC,SAA1C;AACAZ,yCAAKC,WAAL,CAAiBC,WAAjB;AACAF,yCAAKC,WAAL,CAAiBiB,cAAjB,CAAgCoB,IAAhC;AACH;AACJ,6BAfD;AAgBH;AAlCY,qBAAjB;AAoCH,iBAvCK,CAuCJzB,IAvCI,CAuCC,IAvCD;AANC,aAAf;AAgDH;AACJ,KA5DI;AA8DL0B,YA9DK,sBA8DM;AACP,YAAIvC,KAAKC,WAAL,CAAiBiB,cAArB,EAAqC;AACjClB,iBAAKC,WAAL,CAAiBiB,cAAjB,CAAgCsB,IAAhC;AACH;AACJ,KAlEI;AAqELC,aArEK,uBAqEO;AACR,YAAIzC,KAAKC,WAAL,CAAiBiB,cAArB,EAAqC;AACjClB,iBAAKC,WAAL,CAAiBiB,cAAjB,CAAgCoB,IAAhC;AACH;AACJ;AAzEI,CAAT","file":"uiLogin.js","sourceRoot":"../../../../../assets/common/script","sourcesContent":["var uiPanel = require(\"uiPanel\");\ncc.Class({\n    extends: uiPanel,\n    properties: {},\n\n    onLoad() {\n        this._super();\n    },\n\n    start() {\n        this.nodeDict[\"start\"].on(\"click\", Game.GameManager.matchVsInit, Game.GameManager);\n        if (window.wx) {\n            wx.getUserInfo({\n                    success: function(res) {\n                        console.log(\"wx.getUserInfo success\");\n                        Game.GameManager.nickName = res.userInfo.nickName;\n                        Game.GameManager.avatarUrl = res.userInfo.avatarUrl;\n                    }.bind(this),\n                    fail: function() {\n                        console.log(\"wx.getUserInfo fail\");\n                        this.nodeDict[\"start\"].active = false;\n                        wx.getSystemInfo({\n                            success: function(data) {\n                                Game.GameManager.getUserInfoBtn = wx.createUserInfoButton({\n                                    type: 'text',\n                                    text: '开始多人游戏',\n                                    style: {\n                                        left: data.screenWidth * 0.2,\n                                        top: data.screenHeight * 0.73,\n                                        width: data.screenWidth * 0.65,\n                                        height: data.screenHeight * 0.07,\n                                        lineHeight: data.screenHeight * 0.07,\n                                        backgroundColor: '#fe714a',\n                                        color: '#ffffff',\n                                        textAlign: 'center',\n                                        fontSize: data.screenHeight * 0.025,\n                                        borderRadius: 8\n                                    }\n                                });\n                                Game.GameManager.getUserInfoBtn.onTap(function(res) {\n                                    console.log(res);\n                                    if (Game.GameManager.isClickCd) {\n                                        return;\n                                    }\n                                    Game.GameManager.isClickCd = true;\n                                    setTimeout(function() {\n                                        Game.GameManager.isClickCd = false;\n                                    }, 1000);\n                                    if(res.userInfo) {\n                                        Game.GameManager.nickName = res.userInfo.nickName;\n                                        Game.GameManager.avatarUrl = res.userInfo.avatarUrl;\n                                        Game.GameManager.matchVsInit();\n                                        Game.GameManager.getUserInfoBtn.hide();\n                                    }\n                                });\n                            }\n                        })\n                    }.bind(this),\n                }\n            );\n        }\n    },\n\n    onEnable() {\n        if (Game.GameManager.getUserInfoBtn) {\n            Game.GameManager.getUserInfoBtn.show();\n        }\n    }\n    ,\n\n    onDisable() {\n        if (Game.GameManager.getUserInfoBtn) {\n            Game.GameManager.getUserInfoBtn.hide();\n        }\n    }\n})\n;\n"]}